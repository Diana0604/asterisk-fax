;HEALTHCHECK COMS
[healthcheck]
exten => 000,1,Verbose(1, call zero)
same => n,Wait(5)
same => n,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING healthcall #1 has been launched' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Playback(faxmachine/healthcheck1)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING healthcall #1 has finished' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[healthcheck]
exten => 0031,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING healthfax #1 has been launched' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/healthfax1.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING healthfax #1 finished printing' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 123,1,Verbose(3, sending fax)
same => n,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Verbose(3, fax received)
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'SEND STEP 3. they have made the healthfax call' -u 'ACTION' -a ${FAXDEST}/${tempfax}.tif -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 456,1,Verbose(1, healthline called received)
same => n,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING healthcheck call' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Playback(faxmachine/healthcheck2)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING the healthcheck call' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[healthcheck]
exten => 0032,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING healthcheck fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/healthfax2.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING healthcheck fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

;----------------------- TBL COMS PART 1 -------------------------------
;general
[from-internal-custom]
exten => 900,1,Verbose(1, receiving fax)
same => n,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Verbose(3, fax received)
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'NEW TBL FAX' -u 'ACTION' -xu diana.vallverdu@gmail.com -a ${FAXDEST}/${tempfax}.tif -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

;what we send
[tbl]
exten => 01helloworld,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING hello world fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/01-helloworld.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING hello world fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/01-helloworld.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[tbl]
exten => 02trust1,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING trust ex 1 fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/02-trust1.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING trust ex 1 fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/02-trust1.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 126,1,Answer()
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'DIALED clearance 1' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Playback(faxmachine/clearance1)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'SEND STEP 6. trust ex 1 completed' -u 'ACTION' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[tbl]
exten => 02trust2,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING trust ex 2 fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/02-trust2.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING trust ex 2 fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/02-trust2.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 1999,1,Answer()
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'DIALED clearance 2' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Playback(faxmachine/clearance2)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'SEND STEP 7. trust ex 2 completed' -u 'ACTION' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[tbl]
exten => 02trust3,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING trust ex 3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/02-trust3.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING trust ex 3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/02-trust3.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[tbl]
exten => 03antenna,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING antenna fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/03-antenna.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING antenna fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/03-antenna.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 555,1,Answer()
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'DIALED antenna call' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Playback(faxmachine/tbl)
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'SEND STEP 9. antenna completed' -u 'ACTION' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[tbl]
exten => 04spies,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING spies fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/04-spies.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING spies fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/04-spies.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 42,1,Answer()
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'DIALED spies called' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Playback(faxmachine/answers)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'SEND STEP 10. spies completed' -u 'ACTION' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[tbl]
exten => 05mission,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING mission fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/05-mission.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING mission fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/05-mission.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()


;CONSIGNIA
[consignia]
exten => 06-consignia,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING consignia' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/06-consignia.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING consignia' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/06-consignia.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

;TBL COMS PART 2 (LAST STEPS)
[laststeps]
exten => 07-laststeps1,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING explanation of last steps' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/07-laststeps1.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING explanation of last steps' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps1.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[laststeps]
exten => 07-laststeps2,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING step #1' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/07-laststeps2.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING step #1' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps2.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[laststeps]
exten => 07-laststeps3,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING step #2' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/07-laststeps3.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING step #2' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps3.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[laststeps]
exten => 07-laststeps4,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING step #3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/07-laststeps4.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING step #3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps4.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[laststeps]
exten => 07-laststeps4.5,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING step #3.5' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/07-laststeps4.5.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING step #3.5' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps4.5.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[laststeps]
exten => 07-laststeps5,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING last step #4' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/07-laststeps5.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING last step #4' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps5.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

;LAST FAX
[finale]
exten => lastfax,1,Answer()
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING credits!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/final.tif)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING credits!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()







;THESE THRE HAVE TO BE SENT IN A ROW















[from-internal-custom]
exten => 0,1,Answer()
same => n,Set(FAXSENT=0,g)
;same => n,Playback(custom/03)
;same => n,System(cp /root/04.call /var/spool/asterisk/outgoing/)
same => n,Hangup()

[from-internal-custom]
exten => 156,1,Answer()
;exten => n,Set(FAXSENT=1)
;same => n,Playback(custom/03)
;same => n,System(cp /root/04.call /var/spool/asterisk/outgoing/)
same => n,Hangup()