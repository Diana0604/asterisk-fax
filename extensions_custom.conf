[manage_calls]
exten => sound_wait,1,Verbose(1, managing new call)
;get step from db
same => n,Set(STEP=${DB(WESTILLFAX/step)})
;send email step has been dialed
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'DIALED call to step: ${STEP}' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
;set waiting time from database
;same => n,Set(WAIT_TIME=${DB(WESTILLFAX/call_length/${STEP})})
;wait time for call
;same => n,Wait(${WAIT_TIME})
;set step to next
;same => n,Set(DB(WESTILLFAX/step)=${MATH(${STEP}+1,i)})
;send email info that call has finished
same => n,System(sendemail -f diana.vallverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHED call to step: ${STEP}' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
;hangup
same => n,Hangup()

exten => sound_play,1,Verbose(1, playing call from fax machine)
same => n,Playback(${ARG1})

;HEALTHCHECK COMS
[healthchecks]
exten => 00,1,Verbose(1, call zero)
same => n,Wait(5)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING healthcall #1 has been launched' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Background(faxmachine/02_healthcall.1)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'REPEATING healthcall #1 has finished without pressing 1' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

exten => 1989,1,Wait(2)
same => n,Playback(faxmachine/02_healthcall.2)
same => n,Set(DB(WESTILLFAX/step)=03)
same => n,Background(faxmachine/02_healthcall.3)
same => n,Hangup()

exten => 5,1,Wait(2)
same => n,Playback(faxmachine/02_healthcall.2)
same => n,Hangup()

exten => i,1,Background(sorry)
same => n,Hangup()

[healthchecks]
exten => 01,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING healthfax #1 has been launched' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/03_healthfax1.tif)
same => n,Set(DB(WESTILLFAX/step)=04)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING healthfax #1 finished printing' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 123ok,1,Set(DB(WESTILLFAX/step)=05)
same => n,Playback(faxmachine/04_receive_healthchecks.2)
same => n,Background(faxmachine/04_receive_healthchecks.1)
exten => 123ok,n,Return()

exten => 123,1,Verbose(1, healthline called received)
same => n,Verbose(1, ${DB(WESTILLFAX/step)})
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 04]?123ok,1)
;same => n,ExecIf($[${DB(WESTILLFAX/step)} > 04],Playback,faxmachine/04_receive_healthchecks)
same => n,Hangup()

exten => 5,1,Wait(2)
same => n,Playback(faxmachine/04_receive_healthchecks.2)
same => n,Hangup()

exten => i,1,Background(sorry)
same => n,Hangup()

[from-internal-custom]
exten => 456ok,1,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Set(DB(WESTILLFAX/step)=06)

exten => 456,1,Verbose(1, sending fax)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 05]?456ok,1)
same => n,Hangup()

;----------------------- TBL COMS PART 1 -------------------------------


;what we send
[tbl]
exten => helloworld,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING hello world fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/06_helloworld.tif)
same => n,Set(DB(WESTILLFAX/step)=07)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING hello world fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/01-helloworld.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

;Hellowolrd-send Declaration to 900
[from-internal-custom]
exten => 900ok,1,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Set(DB(WESTILLFAX/step)=08)

exten => 900,1,Verbose(1, receiving fax)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 07]?900ok,1)
same => n,Hangup()

[tbl]
exten => notarobot,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING trust ex 1 fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/08_notarobot.tif)
same => n,Set(DB(WESTILLFAX/step)=09)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING trust ex 1 fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/02-trust1.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 2019ok,1,Playback(faxmachine/09_describe_world)
;exten => 2019ok,1,Verbose(1,no eva)
same => n,MixMonitor(/var/lib/asterisk/sounds/en/faxmachine/26_recording.wav)
same => n,Set(DB(WESTILLFAX/step)=10)
same => n,Wait(20)
same => n,Return()


exten => 2019,1,Answer()
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 09]?2019ok,1)
same => n,Hangup()

[tbl]
exten => questionaire,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING trust ex 3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/10_questionnaire.tif)
same => n,Set(DB(WESTILLFAX/step)=11)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING trust ex 3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/02-trust3.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

;Questionnaire-Send Questionaire to 901
[from-internal-custom]
exten => questok,1,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Set(DB(WESTILLFAX/step)=12)

exten => 901,1,Verbose(1, receiving fax)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 11]?questok,1)
same => n,Hangup()

exten => 1,1,Verbose(1, receiving fax)
same => n,Set(DB(WESTILLFAX/agent)=1)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 11]?questok,1)
same => n,Hangup()

exten => 2,1,Verbose(1, receiving fax)
same => n,Set(DB(WESTILLFAX/agent)=2)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 11]?questok,1)
same => n,Hangup()

exten => 3,1,Verbose(1, receiving fax)
same => n,Set(DB(WESTILLFAX/agent)=3)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 11]?questok,1)
same => n,Hangup()

[tbl]
exten => openhatch,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING antenna fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Set(STEP=${DB(WESTILLFAX/agent)})
same => n,Verbose(1,/fax/tifs/12_openhatch_agent${STEP}.tif)
same => n,SendFax(/fax/tifs/12_openhatch_agent${STEP}.tif)
same => n,Set(DB(WESTILLFAX/step)=13)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING antenna fax' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/03-antenna.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 555ok,1,Playback(faxmachine/14_cant_hear)
same => n,Set(DB(WESTILLFAX/step)=15)
same => n,Return()

exten => 555,1,Verbose(1, healthline called received)
same => n,Verbose(1, ${DB(WESTILLFAX/step)})
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 14]?555ok,1)
same => n,Hangup()

[tbl]
exten => mass,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING step #3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/16_mass.tif)
same => n,Set(DB(WESTILLFAX/step)=17)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING step #3' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,System(sendemail -f 'faxmachinX321@intergalactical-mail.univ' -t agent4.consignia.rm@gmail.com -m 'NEW TBL FAX' -u 'TBL FAX' -xu agent4.consignia.rm@gmail.com -a /fax/tifs/07-laststeps4.tif -xp FAX.2020 -s smtp.gmail.com)
same => n,Hangup()

;Mass-send Space Drawing to 902
[from-internal-custom]
exten => 3142ok,1,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Set(DB(WESTILLFAX/step)=18)

exten => 3142,1,Verbose(1, receiving fax)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 17]?3142ok,1)
same => n,Hangup()

[from-internal-custom]
exten => 3892019837628ok,1,Playback(faxmachine/21_tbl_askforsacrifice)
same => n,Set(DB(WESTILLFAX/step)=22)
same => n,Return()

exten => 3892019837628,1,Verbose(1, healthline called received)
same => n,Verbose(1, ${DB(WESTILLFAX/step)})
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 21]?3892019837628ok,1)
same => n,Hangup()

;tbl_askfor_sacrifice-send sacrifice to 903
[from-internal-custom]
exten => 903ok,1,Set(FAXDEST=/tmp)
same => n,Set(tempfax=${STRFTIME(,,%C%y%m%d%H%M)})
same => n,ReceiveFax(${FAXDEST}/${tempfax}.tif,d)
same => n,Set(DB(WESTILLFAX/step)=24)

exten => 903,1,Verbose(1, receiving fax)
same => n,GosubIf($[${DB(WESTILLFAX/step)} = 23]?903ok,1)
same => n,Hangup()

;mashup1
[tbl]
exten => mashup1,1,Verbose(1, Starting mashup)
same => n,SendFax(/fax/tifs/25_calls_fax_1.tif)
same => n,Set(DB(WESTILLFAX/step)=26)
same => n,Hangup()

;mashup2
[tbl]
exten => mashup2,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING meshup2!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Set(DB(WESTILLFAX/step)=27)
same => n,Playback(faxmachine/26_recording)
same => n,Playback(faxmachine/26_recording)
same => n,Playback(faxmachine/26_recording)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING meshup2!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

;mashup3
[tbl]
exten => mashup3,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING meshup2!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/27_calls_fax_3.tif)
same => n,Set(DB(WESTILLFAX/step)=28)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING meshup2!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

;LAST FAX
[ants]
exten => credits,1,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'STARTING credits!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,SendFax(/fax/tifs/28_credits.tif)
same => n,Set(DB(WESTILLFAX/step)=29)
same => n,System(sendemail -f diana.valverdu@gmail.com -t diana.vallverdu@gmail.com -m 'FINISHING credits!' -u 'INFO' -xu diana.vallverdu@gmail.com -xp fcnxcntclkxrrxvd -s smtp.gmail.com)
same => n,Hangup()

[from-internal-custom]
exten => 1234,1,Answer()
    ;;Play mesage in English:
exten => 1234,n,agi(googletts.agi,"This is a simple google text to speech test in english.",en)
    ;;Play message in Spanish
exten => 1234,n,agi(googletts.agi,"Esta es una simple prueba en español.",es)
    ;;Play message in Greek
exten => 1234,n,agi(googletts.agi,"Αυτό είναι ένα απλό τέστ στα ελληνικά.",el)
exten => 1234,n,Hangup()

;EASTER EGGS 1
[from-internal-custom]
exten => 12345678,1,Verbose(1, easter eggs 1 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=1)
same => n,Wait(44)
same => n,Hangup()

;EASTER EGGS 2
[from-internal-custom]
exten => 3124,1,Verbose(1, easter eggs 2 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=2)
same => n,Wait(75)
;same => n,Playback(faxmachine/eastereggs/Easter_Egg_2_Musk_3000)
same => n,Hangup()·

;EASTER EGGS 3
[from-internal-custom]
exten => 65,1,Verbose(1, easter eggs 3 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=3)
same => n,Wait(25)
;same => n,Playback(faxmachine/eastereggs/Easter_Egg_3_Musk_65)
same => n,Hangup()

;EASTER EGGS 4
[from-internal-custom]
exten => 987,1,Verbose(1, easter eggs 4 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=4)
same => n,Wait(43)
;same => n,Playback(faxmachine/eastereggs/Easter_Egg_4_Musk_900)
same => n,Hangup()

;EASTER EGGS 5
[from-internal-custom]
exten => 12101113,1,Verbose(1, easter eggs 5 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=5)
same => n,Wait(70)
;same => n,Playback(faxmachine/eastereggs/Easter_Egg_5_Musk_no_date)
same => n,Hangup()

;EASTER EGGS 6 choose 1 2 3 to check
[from-internal-custom]
exten => 118118,1,Verbose(1, easter eggs 6 received)
same => n,Answer()
same => n,Background(faxmachine/eastereggs/Easter_Egg_6_facts)
;same => n,Wait(5)
same => n,Hangup()

exten => 11,1,Wait(1)
same => n,Playback(faxmachine/eastereggs/Easter_Egg_6_1_bodies)
;same => n,Background(faxmachine/eastereggs/Easter_Egg_6_1_bodies.1)
;same => n,Set(DB(WESTILLFAX/soundegg)=61)
;same => n,Wait(32)
same => n,Hangup()

exten => 12,1,Wait(1)
same => n,Playback(faxmachine/eastereggs/Easter_Egg_6_2_animals)
;same => n,Background(faxmachine/eastereggs/Easter_Egg_6_2_animals.1)
;same => n,Set(DB(WESTILLFAX/soundegg)=62)
;same => n,Wait(32)
same => n,Hangup()

exten => 13,1,Wait(1)
same => n,Playback(faxmachine/eastereggs/Easter_Egg_6_3_hair)
;same => n,Background(faxmachine/eastereggs/Easter_Egg_6_3_hair.1)
;same => n,Set(DB(WESTILLFAX/soundegg)=63)
;same => n,Wait(40)
same => n,Hangup()

exten => i,1,Background(sorry)
same => n,Hangup()

;EASTER EGGS 7
[from-internal-custom]
exten => 05,1,Verbose(1, easter eggs 7 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=23)
same => n,Wait(13)
same => n,Hangup()

;EASTER EGGS 23
[from-internal-custom]
exten => 75,1,Verbose(1, easter eggs 23 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=23)
same => n,Wait(13)
same => n,Hangup()

;EASTER EGGS 24
[from-internal-custom]
exten => 475,1,Verbose(1, easter eggs 24 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=23)
same => n,Wait(13)
same => n,Hangup()

;EASTER EGGS 8
[from-internal-custom]
exten => 6145,1,Verbose(1, easter eggs 8 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=8)
same => n,Wait(78)
same => n,Hangup()

;EASTER EGGS 9
[from-internal-custom]
exten => 0806,1,Verbose(1, easter eggs 9 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=9)
same => n,Wait(65)
same => n,Hangup()

;EASTER EGGS 10 to check
[from-internal-custom]
exten => 411,1,Verbose(1, easter eggs 10 received)
exten => 411,2,Answer()
exten => 411,3,Background(faxmachine/eastereggs/Easter_Egg_10_Intro)
exten => 411,4,Hangup()

exten => 66,1,Wait(1)
exten => 66,2,Answer()
exten => 66,3,Background(faxmachine/eastereggs/Easter_Egg_10_Stop1)
exten => 66,4,Hangup()

exten => 77,1,Wait(1)
exten => 77,2,Answer()
exten => 77,3,Background(faxmachine/eastereggs/Easter_Egg_10_Stop2)
exten =>77,4,Hungup()

exten => 88,1,Wait(1)
exten => 88,2,Answer()
exten => 88,3,Playback(faxmachine/eastereggs/Easter_Egg_10_Stop3)
exten => 88,4,Hungup()

exten => i,5,Background(sorry)
exten => i,6,Hungup()

;EASTER EGGS 11 a fax too
[from-internal-custom]
exten => 852ok,1,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=11)
same => n,Set(DB(WESTILLFAX/soundegg)=11)
same => n,Playback(faxmachine/Incoming_Fax.2)

exten => 852,1,Verbose(1, easter eggs 11 received)
same => n,Answer()
same => n,GosubIf($[${DB(WESTILLFAX/faxegg11)} = 0]?852ok,1)
same => n,Hangup()

;EASTER EGGS 12 a fax
[from-internal-custom]
exten => 10,1,Verbose(1, easter eggs 12 received)
same => n,Answer()
same => n,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=12)
same => n,Playback(faxmachine/Incoming_Fax.2)
same => n,Hangup()

;EASTER EGGS 13
[from-internal-custom]
exten => 02,1,Verbose(1, easter eggs 13 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=13)
same => n,Wait(62)
same => n,Hangup()

;EASTER EGGS 14 a fax too
[from-internal-custom]
exten => 1327,1,Verbose(1, easter eggs 14 received)
same => n,Answer()
same => n,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=14)
same => n,Set(DB(WESTILLFAX/soundegg)=14)
same => n,Playback(faxmachine/Incoming_Fax.2)
same => n,Hangup()

;EASTER EGGS 17
[from-internal-custom]
exten => 31712,1,Verbose(1, easter eggs 17 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=17)
same => n,Wait(95)
same => n,Hangup()

;EASTER EGGS 18
[from-internal-custom]
exten => 59135,1,Verbose(1, easter eggs 18 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=18)
same => n,Wait(55)
same => n,Hangup()

;EASTER EGGS 19 a fax too
[from-internal-custom]
exten => 234,1,Verbose(1, easter eggs 19 received)
same => n,Answer()
same => n,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=19)
same => n,Set(DB(WESTILLFAX/soundegg)=19)
same => n,Playback(faxmachine/Incoming_Fax.2)
same => n,Hangup()

;EASTER EGGS 20
[from-internal-custom]
exten => 15,1,Verbose(1, easter eggs 20 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=20)
same => n,Wait(11)
same => n,Hangup()

;EASTER EGGS 21
[from-internal-custom]
exten => 9,1,Verbose(1, easter eggs 21 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=21)
same => n,Wait(52)
same => n,Hangup()

;EASTER EGGS 22 a fax too
[from-internal-custom]
exten => 931989,1,Verbose(1, easter eggs 22 received)
same => n,Answer()
same => n,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=22)
same => n,Set(DB(WESTILLFAX/soundegg)=22)
same => n,Playback(faxmachine/Incoming_Fax.2)
same => n,Hangup()

;EASTER EGGS 25 a fax too
[from-internal-custom]
exten => 1989,1,Verbose(1, easter eggs 25 received)
same => n,Answer()
same => n,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=22)
same => n,Set(DB(WESTILLFAX/soundegg)=22)
same => n,Playback(faxmachine/Incoming_Fax.2)
same => n,Hangup()

;EASTER EGGS 26 a fax too
[from-internal-custom]
exten => 031989,1,Verbose(1, easter eggs 26 received)
same => n,Answer()
same => n,Playback(faxmachine/Incoming_Fax.1)
same => n,Set(DB(WESTILLFAX/faxegg)=22)
same => n,Set(DB(WESTILLFAX/soundegg)=22)
same => n,Playback(faxmachine/Incoming_Fax.2)
same => n,Hangup()

;EASTER EGGS 27
[from-internal-custom]
exten => 2009,1,Verbose(1, easter eggs 27 received)
same => n,Answer()
same => n,Set(DB(WESTILLFAX/soundegg)=27)
same => n,Wait(44)
same => n,Hangup()

;EASTER EGGS THAT WE SEND BACK

;11
[eastereggs]
exten => 11,1,Verbose(1,sending fax back)
same => n,SendFax(/fax/tifs/Easter_Egg_11_Disco.tif)

;12
exten => 12,1,Verbose(1,sending fax back)
same => n,SendFax(/fax/tifs/Easter_Egg_12_present.tif)

;14
exten => 14,1,Verbose(1,sending fax back)
same => n,SendFax(/fax/tifs/Easter_Egg_14_Mars.tif)

;19
exten => 19,1,Verbose(1,sending fax back)
same => n,SendFax(/fax/tifs/Easter_Egg_19_Dare.tif)

;22
exten => 22,1,Verbose(1,sending fax back)
same => n,SendFax(/fax/tifs/Easter_Egg_22_proposal.tif)

;TESTER
[tester]
exten =>tester,1,SendFax(/fax/tifs/tester.tif)
;same => n,Set(DB(WESTILLFAX/step)=26)
same => n,Hangup()

;call to send fax
[from-internal-custom]
exten => 88888,1,Answer()
same => n,Playback(hello-world)
same => n,Set(DB(WESTILLFAX/egg1)=YES)
same => n,Wait(5)
;same => n,System(sh /fax/send_fax.sh &)
same => n,Hangup()

[from-internal-custom]
exten => 99999,1,Answer()
same => n,Set(DB(WESTILLFAX/egg2)=YES)
same => n,Wait(25)
same => n,Hangup()

;RECORDING
[from-internal-custom]
exten => 2060,1,Answer()
exten => 2060,2,MixMonitor(/fax/sounds/fax/recording.wav)
exten => 2060,3,Wait(30)
;exten => 2060,3,Monitor(ulaw,/fax/sounds/fax/recording)
;exten => 2060,4,Meetme(1,ps)
